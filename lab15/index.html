<!DOCTYPE html>
<html>
<head>
	<!-- This title is used for tabs and bookmarks -->
	<title>Lab 15 - AJAX</title>

	<!-- Use UTF character set, a good idea with any webpage -->
  	<meta charset="UTF-8" />
	<!-- Set viewport so page remains consistently scaled w narrow devices -->
  	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	
	<!-- Include a sitewide CSS file for consistent styling across the site -->
	<link rel="stylesheet" type="text/css" href="../css/site.css">
	<!-- Lab-specifc CSS file for any special styling of this particular page -->
	<link rel="stylesheet" type="text/css" href="css/lab.css">
	
	<!-- load jQuery library to make javascript easier (must be above our lab js)-->
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

	<!-- Link JS file-->
	<script src="js/lab.js" defer></script>

</head>
<body>
	<!-- Style this page by changing the CSS in ../css/site.css or css/lab.css -->
	<main id="content">
		<section>
			<h1>Lab 15 - AJAX</h1>
			<div class="minor-section" id="challenge">
					<h2>Challenge</h2>
					<p>The challenge for this lab was to learn how to use AJAX to interact with APIs!</p>
			</div>

			<div class="minor-section" id="thoughts">
					<h2>Thoughts</h2>
					<p>This was... a little tough at first but I got it! It just took a bit of experimenting... 
						and choosing the right API. I tried a plant database API called <a href="https://trefle.io/">trefle</a> at first, 
						which was cool, but I couldn't get it to work because of some complicated auth stuff. Essentially, 
						I think for security they blocked off requests made directly from browsers using my key, and you'd 
						have to use a funny serverside thing to get a temp token for the website user to be able to make requests. 
						That was kind of a headache and I didn't wanna have to figure out a workaround (which would've been proxies 
						to bypass CORS? or something) so I just end up using <a href="https://pokeapi.co/">PokeAPI</a> instead, which was a lot less 
						complicated.<br><br>
						Even then PokeAPI came with its own challenges, but I think I 
						got it in a place that I like! I had some trouble with the fact AJAX calls are asynchronous, and thus my code executed 
						at weird times and not the order I expected to, but I worked around that by putting my jQuery page modifications inside of 
						the relevant AJAX calls and otherwise using setTimeout() to sort of half-guarantee my AJAX calls would happen "in order." 
						That's not a perfect solution and I believe the official way to do it would be to use $.when().then() to ensure the "then" code 
						is deferred to when after the AJAX stuff contained in "when" completes, but I kind of mostly didn't want to deal with that 
						for this one and went the cheater way round. I'll definitely be experimenting with that after this lab though.<br><br>
						All in all though I'm pretty happy with what I did, and I think it's super fun! Go see who your Pokefriend is!!! 
						It is based on a variety of calculations done to your name so it won't change if you put the same thing in twice, 
						but it is case-sensitive and such so feel free to experiment and find the Pokefriend that best suits you!! :)
					</p>
			</div>

			<div class="minor-section" id="results">
					<h2>Results</h2>
					<form id="entry">
						<label for="query">Enter your name to find a Pokefriend!  <br></label>
						<input type="text" id="name" required>
						<button>Submit</button>
					</form>

					<div id="output">
						<div id="title"></div>
						<div id="contents"></div>
					</div>
					
			</div>
		</section>
		<nav id="links">
			<!-- Put links to other pages (including the homepage) here. -->
			<ul>
				<li><a href="../index.html" target="_new">Homepage</a></li>
			</ul>
		</nav>
	</main>
</body>
</html>
